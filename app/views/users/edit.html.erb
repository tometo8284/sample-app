<h2>プロフィール編集</h2>
<%= form_with model: @user do |f| %>
  <label for="inputName">Name</label>
  <%= f.text_field :name, autofocus: true, id:"inputName", placeholder:"名前"%>
  <label for="inputImage">ProfileImage</label>
  <%= image_tag @user.profile_image, size: "100x100", id: :img_prev %>
  <%= f.file_field :profile_image, id: :user_image, placeholder: "プロフィール画像", accept: "image/*" %>  
  <%= f.submit "変更を保存" %>
<% end %>

<script type="text/javascript">
  let reader = new FileReader();
  $(function(){
    function readURL(input){
      if (input.files && input.files[0]) {
        reader.onload = function (e) {
          $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $("#user_image").change(function(){
      readURL(this);  
    });
  });
</script>